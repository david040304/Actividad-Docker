<!DOCTYPE html>
<html>
<head>
    <title>Validador de Contraseñas</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='validador.css') }}">
</head>
<body>

<div class="container">
    <h2>Validador de Contraseñas</h2>

    <input type="password" id="password" placeholder="Ingresa tu contraseña">
    <button onclick="validar()">Validar</button>

    <!-- Barra de nivel -->
    <div class="barra-container">
        <div id="barra"></div>
    </div>

    <div class="nivel-texto">
        Nivel: <span id="nivel">-</span>
    </div>

    <div id="errores" class="errores"></div>

    <button class="volver" onclick="window.location.href='/'">
        Volver al inicio
    </button>
</div>

<script>
function validar() {
    const password = document.getElementById("password").value;

    fetch("/validar", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({password: password})
    })
    .then(res => res.json())
    .then(data => {

        const barra = document.getElementById("barra");
        const nivelTexto = document.getElementById("nivel");
        const erroresDiv = document.getElementById("errores");

        nivelTexto.innerText = data.nivel;
        erroresDiv.innerHTML = "";

        if (data.nivel === "Fuerte") {
            barra.style.width = "100%";
            barra.style.backgroundColor = "#2ecc71";
        } 
        else if (data.nivel === "Media") {
            barra.style.width = "50%";
            barra.style.backgroundColor = "#f1c40f";
        } 
        else {
            barra.style.width = "20%";
            barra.style.backgroundColor = "#e74c3c";
        }

        if (data.errores.length > 0) {
            erroresDiv.innerHTML = "<ul>" +
                data.errores.map(e => `<li>${e}</li>`).join("") +
                "</ul>";
        }

    });
}
</script>

</body>
</html>